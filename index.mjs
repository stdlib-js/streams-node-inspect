// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";function p(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}var m="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function c(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}var h=c,b=f;function j(e){if(h===setTimeout)return setTimeout(e,0);if((h===c||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}"function"==typeof m.setTimeout&&(h=setTimeout),"function"==typeof m.clearTimeout&&(b=clearTimeout);var g,w=[],v=!1,y=-1;function x(){v&&g&&(v=!1,g.length?w=g.concat(w):y=-1,w.length&&T())}function T(){if(!v){var e=j(x);v=!0;for(var t=w.length;t;){for(g=w,w=[];++y<t;)g&&g[y].run();y=-1,t=w.length}g=null,v=!1,function(e){if(b===clearTimeout)return clearTimeout(e);if((b===f||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(e);try{b(e)}catch(t){try{return b.call(null,e)}catch(t){return b.call(this,e)}}}(e)}}function _(e,t){this.fun=e,this.array=t}_.prototype.run=function(){this.fun.apply(null,this.array)};function O(){}var M=O,E=O,k=O,W=O,q=O,D=O,P=O;var H=m.performance||{},R=H.now||H.mozNow||H.msNow||H.oNow||H.webkitNow||function(){return(new Date).getTime()};var S=new Date;var A={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];w.push(new _(e,t)),1!==w.length||v||j(T)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:M,addListener:E,once:k,off:W,removeListener:q,removeAllListeners:D,emit:P,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*R.call(H),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-S)/1e3}},N=require("stream");"disable"===A.env.READABLE_STREAM&&N?(module.exports=N,exports=module.exports=N.Readable,exports.Readable=N.Readable,exports.Writable=N.Writable,exports.Duplex=N.Duplex,exports.Transform=N.Transform,exports.PassThrough=N.PassThrough,exports.Stream=N):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=N||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var C=p(Object.freeze({__proto__:null})),L={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1},V=a,z=l,J=u.isPrimitive,B=d.isPrimitive,F=n;var I=function(e,t){return V(t)?z(t,"objectMode")&&(e.objectMode=t.objectMode,!J(e.objectMode))?new TypeError(F("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):z(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!J(e.readableObjectMode))?new TypeError(F("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):z(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!J(e.allowHalfOpen))?new TypeError(F("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):z(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!B(e.highWaterMark))?new TypeError(F("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(F("invalid argument. Options argument must be an object. Value: `%s`.",t))};module.exports=void 0!==A&&"renderer"===A.type?require("./browser.js"):require("./node.js");var G=p(Object.freeze({__proto__:null}))("inspect-stream"),K=C.Transform,Q=t,U=r,X=n,Y=i,Z=e,$=s,ee=L,te=I,re=G;function ne(e,t){var r,n,o;if(!(this instanceof ne))return arguments.length>1?new ne(e,t):new ne(e);if(n=U(ee),arguments.length>1){if(r=t,o=te(n,e))throw o}else r=e;if(!Q(r))throw new TypeError(X("invalid argument. Callback argument must be a function. Value: `%s`.",r));return n.writableObjectMode=!0,re("Creating a transform stream configured with the following options: %s.",JSON.stringify(n)),K.call(this,n),Y(this,"_destroyed",!1),Y(this,"_idx",-1),Z(this,"_inspect",r),this}o(ne,K),Z(ne.prototype,"_transform",(function(e,t,r){this._idx+=1,re("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this.push(e),r()})),Z(ne.prototype,"_flush",(function(e){re("Flushing the stream..."),e()})),Z(ne.prototype,"destroy",(function(e){var t;return this._destroyed?(re("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,$((function(){e&&(re("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));re("Closing the stream..."),t.emit("close")})),this)}));var oe=a,ie=n,se=r,ae=ne;var le=a,ue=n,de=r,pe=ne;var me=e,ce=ne,fe=function(e,t){var r,n;if(arguments.length>1){if(!oe(e))throw new TypeError(ie("invalid argument. Options argument must be an object. Value: `%s`.",e));r=se(e),n=t}else r={},n=e;return r.objectMode=!0,new ae(r,n)},he=function(e){var t;if(arguments.length){if(!le(e))throw new TypeError(ue("invalid argument. Options argument must be an object. Value: `%s`.",e));t=de(e)}else t={};return r;function r(e){return new pe(t,e)}};me(ce,"objectMode",fe),me(ce,"factory",he);var be=ce;export{be as default,he as factory,fe as objectMode};
//# sourceMappingURL=index.mjs.map

// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("stream"),require("process")):"function"==typeof define&&define.amd?define(["stream","process"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).inspectStream=e(t.require$$0$2,t.require$$0$1)}(this,(function(t,e){"use strict";var r="function"==typeof Object.defineProperty?Object.defineProperty:null;var n,o=Object.defineProperty,i=Object.prototype,u=i.toString,c=i.__defineGetter__,a=i.__defineSetter__,f=i.__lookupGetter__,l=i.__lookupSetter__;n=function(){try{return r({},"x",{}),!0}catch(t){return!1}}()?o:function(t,e,r){var n,o,p,s;if("object"!=typeof t||null===t||"[object Array]"===u.call(t))throw new TypeError("invalid argument. First argument must be an object. Value: `"+t+"`.");if("object"!=typeof r||null===r||"[object Array]"===u.call(r))throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if((o="value"in r)&&(f.call(t,e)||l.call(t,e)?(n=t.__proto__,t.__proto__=i,delete t[e],t[e]=r.value,t.__proto__=n):t[e]=r.value),p="get"in r,s="set"in r,o&&(p||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return p&&c&&c.call(t,e,r.get),s&&a&&a.call(t,e,r.set),t};var p=n;function s(t,e,r){p(t,e,{configurable:!1,enumerable:!1,writable:!1,value:r})}function y(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var r=function t(){if(this instanceof t){var r=[null];r.push.apply(r,arguments);var n=Function.bind.apply(e,r);return new n}return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var b=/./;function d(t){return"boolean"==typeof t}var h="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function g(){return h&&"symbol"==typeof Symbol.toStringTag}var v=Object.prototype.toString;var j=Object.prototype.hasOwnProperty;function w(t,e){return null!=t&&j.call(t,e)}var m="function"==typeof Symbol?Symbol.toStringTag:"";var O=g()?function(t){var e,r,n;if(null==t)return v.call(t);r=t[m],e=w(t,m);try{t[m]=void 0}catch(e){return v.call(t)}return n=v.call(t),e?t[m]=r:delete t[m],n}:function(t){return v.call(t)},_=Boolean.prototype.toString;var S=g();function E(t){return"object"==typeof t&&(t instanceof Boolean||(S?function(t){try{return _.call(t),!0}catch(t){return!1}}(t):"[object Boolean]"===O(t)))}function M(t){return d(t)||E(t)}function T(){return new Function("return this;")()}s(M,"isPrimitive",d),s(M,"isObject",E);var P="object"==typeof self?self:null,k="object"==typeof window?window:null,I="object"==typeof global?global:null;var x=function(t){if(arguments.length){if(!d(t))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+t+"`.");if(t)return T()}if(P)return P;if(k)return k;if(I)return I;throw new Error("unexpected error. Unable to resolve global object.")}(),A=x.document&&x.document.childNodes,N=Int8Array;function V(){return/^\s*function\s*([^(]*)/i}var F=/^\s*function\s*([^(]*)/i;s(V,"REGEXP",F);var H=Array.isArray?Array.isArray:function(t){return"[object Array]"===O(t)};function B(t){return null!==t&&"object"==typeof t}function C(t){var e,r,n,o;if(("Object"===(r=O(t).slice(8,-1))||"Error"===r)&&t.constructor){if("string"==typeof(n=t.constructor).name)return n.name;if(e=F.exec(n.toString()))return e[1]}return B(o=t)&&(o._isBuffer||o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o))?"Buffer":r}s(B,"isObjectLikeArray",function(t){if("function"!=typeof t)throw new TypeError("invalid argument. Must provide a function. Value: `"+t+"`.");return function(e){var r,n;if(!H(e))return!1;if(0===(r=e.length))return!1;for(n=0;n<r;n++)if(!1===t(e[n]))return!1;return!0}}(B));var W="function"==typeof b||"object"==typeof N||"function"==typeof A?function(t){return C(t).toLowerCase()}:function(t){var e;return null===t?"null":"object"===(e=typeof t)?C(t).toLowerCase():e};function $(t){return"function"===W(t)}var L=$(Object.assign),q=Object.assign,G=Object;function Y(t){return Object.keys(Object(t))}var D,R=void 0!==Object.keys;function X(t){return"[object Arguments]"===O(t)}D=function(){return X(arguments)}();var J=D;function U(t){return"string"==typeof t}var z=String.prototype.valueOf;var K=g();function Q(t){return"object"==typeof t&&(t instanceof String||(K?function(t){try{return z.call(t),!0}catch(t){return!1}}(t):"[object String]"===O(t)))}function Z(t){return U(t)||Q(t)}function tt(t){return"number"==typeof t}s(Z,"isPrimitive",U),s(Z,"isObject",Q);var et=Number,rt=et.prototype.toString;var nt=g();function ot(t){return"object"==typeof t&&(t instanceof et||(nt?function(t){try{return rt.call(t),!0}catch(t){return!1}}(t):"[object Number]"===O(t)))}function it(t){return tt(t)||ot(t)}function ut(t){return t!=t}function ct(t){return tt(t)&&ut(t)}function at(t){return ot(t)&&ut(t.valueOf())}function ft(t){return ct(t)||at(t)}s(it,"isPrimitive",tt),s(it,"isObject",ot),s(ft,"isPrimitive",ct),s(ft,"isObject",at);var lt=Number.POSITIVE_INFINITY,pt=et.NEGATIVE_INFINITY,st=Math.floor;function yt(t){return st(t)===t}function bt(t){return t<lt&&t>pt&&yt(t)}function dt(t){return tt(t)&&bt(t)}function ht(t){return ot(t)&&bt(t.valueOf())}function gt(t){return dt(t)||ht(t)}s(gt,"isPrimitive",dt),s(gt,"isObject",ht);var vt=Object.prototype.propertyIsEnumerable;var jt=!vt.call("beep","0");function wt(t,e){var r;return null!=t&&(!(r=vt.call(t,e))&&jt&&Z(t)?!ct(e=+e)&&dt(e)&&e>=0&&e<t.length:r)}var mt=J?X:function(t){return null!==t&&"object"==typeof t&&!H(t)&&"number"==typeof t.length&&yt(t.length)&&t.length>=0&&t.length<=4294967295&&w(t,"callee")&&!wt(t,"callee")},Ot=Array.prototype.slice;var _t=wt((function(){}),"prototype"),St=!wt({toString:null},"toString");function Et(t){return"object"==typeof t&&null!==t&&"number"==typeof t.length&&yt(t.length)&&t.length>=0&&t.length<=9007199254740991}function Mt(t,e,r){var n,o;if(!Et(t)&&!U(t))throw new TypeError("invalid argument. First argument must be an array-like object. Value: `"+t+"`.");if(0===(n=t.length))return-1;if(3===arguments.length){if(!dt(r))throw new TypeError("invalid argument. `fromIndex` must be an integer. Value: `"+r+"`.");if(r>=0){if(r>=n)return-1;o=r}else(o=n+r)<0&&(o=0)}else o=0;if(ft(e)){for(;o<n;o++)if(ft(t[o]))return o}else for(;o<n;o++)if(t[o]===e)return o;return-1}function Tt(t){return t.constructor&&t.constructor.prototype===t}var Pt=["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"],kt="undefined"==typeof window?void 0:window;var It=function(){var t;if("undefined"===W(kt))return!1;for(t in kt)try{-1===Mt(Pt,t)&&w(kt,t)&&null!==kt[t]&&"object"===W(kt[t])&&Tt(kt[t])}catch(t){return!0}return!1}(),xt="undefined"!=typeof window;var At,Nt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];At=R?function(){return 2!==(Y(arguments)||"").length}(1,2)?function(t){return mt(t)?Y(Ot.call(t)):Y(t)}:Y:function(t){var e,r,n,o,i,u,c;if(o=[],mt(t)){for(c=0;c<t.length;c++)o.push(c.toString());return o}if("string"==typeof t){if(t.length>0&&!w(t,"0"))for(c=0;c<t.length;c++)o.push(c.toString())}else{if(!1==(n="function"==typeof t)&&!B(t))return o;r=_t&&n}for(i in t)r&&"prototype"===i||!w(t,i)||o.push(String(i));if(St)for(e=function(t){if(!1===xt&&!It)return Tt(t);try{return Tt(t)}catch(t){return!1}}(t),c=0;c<Nt.length;c++)u=Nt[c],e&&"constructor"===u||!w(t,u)||o.push(String(u));return o};var Vt,Ft=At,Ht=G.getOwnPropertyDescriptor;Vt=L?q:function(t){var e,r,n,o,i,u,c,a;if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(u=G(t),c=1;c<arguments.length;c++)if(null!=(e=arguments[c]))for(i=(n=Ft(G(e))).length,a=0;a<i;a++)o=n[a],void 0!==(r=Ht(e,o))&&r.enumerable&&(u[o]=e[o]);return u};var Bt=Vt;function Ct(){var t,e=arguments,r=e[0],n="https://stdlib.io/e/"+r+"?";for(t=1;t<e.length;t++)n+="&arg[]="+encodeURIComponent(e[t]);return n}function Wt(t){var e=typeof t;return null===t||"object"!==e&&"function"!==e?new TypeError("invalid argument. A provided constructor must be either an object (except null) or a function. Value: `"+t+"`."):null}var $t=Object.create;function Lt(){}var qt="function"==typeof $t?$t:function(t){return Lt.prototype=t,new Lt};function Gt(t,e,r){p(t,e,{configurable:!0,enumerable:!1,writable:!0,value:r})}var Yt=e;var Dt={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1};var Rt,Xt=Object.getPrototypeOf;Rt=$(Object.getPrototypeOf)?Xt:function(t){var e=function(t){return t.__proto__}(t);return e||null===e?e:"[object Function]"===O(t.constructor)?t.constructor.prototype:t instanceof Object?Object.prototype:null};var Jt=Rt;var Ut=Object.prototype;function zt(t){var e;return!!function(t){return"object"==typeof t&&null!==t&&!H(t)}(t)&&(e=function(t){return null==t?null:(t=Object(t),Jt(t))}(t),!e||!w(t,"constructor")&&w(e,"constructor")&&$(e.constructor)&&"[object Function]"===O(e.constructor)&&w(e,"isPrototypeOf")&&$(e.isPrototypeOf)&&(e===Ut||function(t){var e;for(e in t)if(!w(t,e))return!1;return!0}(t)))}function Kt(t){return tt(t)&&t>=0}function Qt(t){return ot(t)&&t.valueOf()>=0}function Zt(t){return Kt(t)||Qt(t)}function te(t,e){return zt(e)?w(e,"objectMode")&&(t.objectMode=e.objectMode,!d(t.objectMode))?new TypeError(Ct("0g430","objectMode",t.objectMode)):w(e,"readableObjectMode")&&(t.readableObjectMode=e.readableObjectMode,!d(t.readableObjectMode))?new TypeError(Ct("0g430","readableObjectMode",t.readableObjectMode)):w(e,"allowHalfOpen")&&(t.allowHalfOpen=e.allowHalfOpen,!d(t.allowHalfOpen))?new TypeError(Ct("0g430","allowHalfOpen",t.allowHalfOpen)):w(e,"highWaterMark")&&(t.highWaterMark=e.highWaterMark,!Kt(t.highWaterMark))?new TypeError(Ct("0g44x","highWaterMark",t.highWaterMark)):null:new TypeError(Ct("0g42h",e))}s(Zt,"isPrimitive",Kt),s(Zt,"isObject",Qt);var ee=y(Object.freeze({__proto__:null,default:()=>()=>{}}))("inspect-stream"),re=t.Transform;function ne(t,e){var r,n,o;if(!(this instanceof ne))return arguments.length>1?new ne(t,e):new ne(t);if(n=Bt({},Dt),arguments.length>1){if(r=e,o=te(n,t))throw o}else r=t;if(!$(r))throw new TypeError(Ct("0g42n",r));return n.writableObjectMode=!0,ee("Creating a transform stream configured with the following options: %s.",JSON.stringify(n)),re.call(this,n),Gt(this,"_destroyed",!1),Gt(this,"_idx",-1),s(this,"_inspect",r),this}return function(t,e){var r=Wt(t);if(r)throw r;if(r=Wt(e))throw r;if(void 0===e.prototype)throw new TypeError("invalid argument. Second argument must have a prototype from which another object can inherit. Value: `"+e.prototype+"`.");t.prototype=qt(e.prototype),p(t.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:t})}(ne,re),s(ne.prototype,"_transform",(function(t,e,r){this._idx+=1,ee("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",t.toString(),e,this._idx),this._inspect.call(null,t,this._idx),this.push(t),r()})),s(ne.prototype,"_flush",(function(t){ee("Flushing the stream..."),t()})),s(ne.prototype,"destroy",(function(t){var e;return this._destroyed?(ee("Attempted to destroy an already destroyed stream."),this):(e=this,this._destroyed=!0,function(t){var e,r;for(e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);function n(){t.apply(null,e)}Yt.nextTick(n)}((function(){t&&(ee("Stream was destroyed due to an error. Error: %s.",JSON.stringify(t)),e.emit("error",t));ee("Closing the stream..."),e.emit("close")})),this)})),s(ne,"objectMode",(function(t,e){var r,n;if(arguments.length>1){if(!zt(t))throw new TypeError(Ct("0g42h",t));r=Bt({},t),n=e}else r={},n=t;return r.objectMode=!0,new ne(r,n)})),s(ne,"factory",(function(t){var e;if(arguments.length){if(!zt(t))throw new TypeError(Ct("0g42h",t));e=Bt({},t)}else e={};return r;function r(t){return new ne(e,t)}})),ne}));
//# sourceMappingURL=index.js.map
